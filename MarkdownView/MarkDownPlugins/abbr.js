/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/markdown-it-abbr@1.0.4/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";module.exports=function(e){var n=e.utils.escapeRE,t=e.utils.arrayReplaceAt,r=" \r\n$+<=>^`|~",i=e.utils.lib.ucmicro.P.source,a=e.utils.lib.ucmicro.Z.source;e.block.ruler.before("reference","abbr_def",(function(e,n,t,r){var i,a,s,o,c,l=e.bMarks[n]+e.tShift[n],b=e.eMarks[n];if(l+2>=b)return!1;if(42!==e.src.charCodeAt(l++))return!1;if(91!==e.src.charCodeAt(l++))return!1;for(o=l;l<b;l++){if(91===(s=e.src.charCodeAt(l)))return!1;if(93===s){c=l;break}92===s&&l++}return!(c<0||58!==e.src.charCodeAt(c+1))&&(!!r||(i=e.src.slice(o,c).replace(/\\(.)/g,"$1"),a=e.src.slice(c+2,b).trim(),0!==i.length&&(0!==a.length&&(e.env.abbreviations||(e.env.abbreviations={}),void 0===e.env.abbreviations[":"+i]&&(e.env.abbreviations[":"+i]=a),e.line=n+1,!0))))}),{alt:["paragraph","reference"]}),e.core.ruler.after("linkify","abbr_replace",(function(e){var s,o,c,l,b,u,f,h,p,v,g,d,k,x=e.tokens;if(e.env.abbreviations)for(d=new RegExp("(?:"+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,n){return n.length-e.length})).map(n).join("|")+")"),g="(^|"+i+"|"+a+"|["+r.split("").map(n).join("")+"])("+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,n){return n.length-e.length})).map(n).join("|")+")($|"+i+"|"+a+"|["+r.split("").map(n).join("")+"])",p=new RegExp(g,"g"),o=0,c=x.length;o<c;o++)if("inline"===x[o].type)for(s=(l=x[o].children).length-1;s>=0;s--)if("text"===(k=l[s]).type&&(h=0,u=k.content,p.lastIndex=0,f=[],d.test(u))){for(;v=p.exec(u);)(v.index>0||v[1].length>0)&&((b=new e.Token("text","",0)).content=u.slice(h,v.index+v[1].length),f.push(b)),(b=new e.Token("abbr_open","abbr",1)).attrs=[["title",e.env.abbreviations[":"+v[2]]]],f.push(b),(b=new e.Token("text","",0)).content=v[2],f.push(b),b=new e.Token("abbr_close","abbr",-1),f.push(b),p.lastIndex-=v[3].length,h=p.lastIndex;f.length&&(h<u.length&&((b=new e.Token("text","",0)).content=u.slice(h),f.push(b)),x[o].children=l=t(l,s,f))}}))};
//# sourceMappingURL=/sm/eef3c4edb87bc746fde7f7a533dcfd6812242f4a2d27e3ecc94c13f721121c12.map